@use 'sass:map';
@use '../_variables_generales' as var;

@mixin paragraph {
    font-size: clamp(map.get(var.$main-font, 'minimo'), var(--main-font-size), map.get(var.$main-font, 'maximo'));
    line-height: calc(1em + .5rem);
    color: var(--main-font-color);
}

@mixin code {
    font-family: map.get(var.$code-font, 'family');
    font-weight: map.get(var.$code-font, 'weight');
    font-size: map.get(var.$code-font, 'size');
    font-style:  map.get(var.$code-font, 'style');
    border-radius: 3px;
    padding: .25rem .5rem;
    white-space: pre-wrap;
}

p, pre, blockquote {
    margin-top: map.get(var.$espaciado, 'identado');
    margin-bottom: map.get(var.$espaciado, 'identado');
}

abbr, ins, mark {
    font-size: clamp(map.get(var.$main-font, 'minimo'), 1em, map.get(var.$main-font, 'maximo'));
}

abbr, ins {
    text-decoration: none;
}

abbr {
    border-bottom: 1px dotted var(--main-font-color);
    cursor: help;
}

ins {
    border-bottom: 1px dashed var(--main-font-color);
}

small, sub, sup {
    font-size: clamp(map.get(var.$main-font, 'minimo'), .75em, map.get(var.$main-font, 'maximo'));
}

sub, sup {
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sub {
    bottom: -.25rem;
}

sup {
    top: -.5rem;
}

mark {
    background-color: var(--mark-background-color);
    padding: .25rem .5rem;
}

blockquote {
    font-size: map.get(var.$paragraph-font, 'blockquote');
    line-height: calc(1em + .5rem);
    padding: map.get(var.$espaciado, 'sangria');
    &::before {
        font-family: "flkt-font";
    }
}

code, pre, samp {
    @include code;
    background-color: var(--code-background-color);
    border: 1px solid var(--code-background-color);
    color: var(--code-font-color);
}

samp::before {
    content: '\2039 _ ';
    color: var(--var-font-color);
}

kbd {
    @include code;
    border: 1px solid var(--code-background-color);
}

var {
    @include code;
    color: var(--var-font-color);
}

@if map.has-key(var.$paragraph-font, 'elements') {
    @each $elemento, $atributos in map.get(var.$paragraph-font, 'elements') {
        #{$elemento} {
            @include paragraph;
            @each $atributo, $valor in $atributos {
                #{$atributo}: #{$valor};
            }
        }
    }
}

@if map.has-key(var.$paragraph-font, 'responsive') {
    @each $dispositivo, $elementos in map.get(var.$paragraph-font, 'responsive') {
        @media screen and (min-width: map.get(var.$breakpoints, #{$dispositivo})) {
            @each $elemento, $atributos in $elementos {
                #{$elemento} {
                    @include paragraph;
                    @each $atributo, $valor in $atributos {
                        #{$atributo}: #{$valor};
                    }
                }
            }
        }
    }
}
